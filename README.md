
# inlay::random

ä¸€ä¸ªé«˜æ€§èƒ½ã€çº¿ç¨‹å®‰å…¨çš„ C++ éšæœºæ•°å·¥å…·åº“ï¼Œæ”¯æŒçº¿ç¨‹å±€éƒ¨éšæœºå¼•æ“ã€é€šç”¨åŒºé—´é‡‡æ ·å‡½æ•° `range`ï¼Œä»¥åŠä¸‰ç§ä¸åŒç­–ç•¥çš„æƒé‡é‡‡æ ·å™¨ï¼ˆAliasã€Expansionã€Binaryï¼‰ã€‚

## ç‰¹æ€§ Features

- ğŸ’¡ çº¿ç¨‹å±€éƒ¨éšæœºå¼•æ“å°è£…ï¼š`thread_rng()`
- ğŸ² é€šç”¨åŒºé—´é‡‡æ ·å‡½æ•°ï¼š`range(min, max)`
- ğŸ“¦ ä¸‰ç§æƒé‡é‡‡æ ·å™¨ï¼š
  - `weight_faster_alias`: O(1) é‡‡æ ·ï¼Œé€‚åˆé¢‘ç¹è°ƒç”¨
  - `weight_faster_expansion`: æè‡´å¿«é€Ÿé‡‡æ ·ï¼Œé€‚åˆå°æƒé‡é›†åˆ
  - `weight_faster_binary`: é€‚åˆé€šç”¨åœºæ™¯ï¼Œæ”¯æŒæ•´æ•°/æµ®ç‚¹æƒé‡

## ç¤ºä¾‹ Example

```cpp
#include "random.hpp"
#include <iostream>

int main() {
  std::vector<int> values{1, 2, 3, 4};
  std::vector<double> weights{0.1, 0.2, 0.3, 0.4};

  inlay::random::weight_faster_alias<int> sampler(
      values.begin(), values.end(),
      weights.begin(), weights.end()
  );

  for (int i = 0; i < 10; ++i) {
    std::cout << sampler() << " ";
  }
}
```

## æ€§èƒ½æ¯”è¾ƒ Benchmark

| æ–¹æ³•                  | åˆå§‹åŒ–å¤æ‚åº¦ | é‡‡æ ·å¤æ‚åº¦ | é€‚ç”¨åœºæ™¯è¯´æ˜ |
|-----------------------|---------------|-------------|----------------|
| `Alias`               | O(n)          | O(1)        | é«˜é¢‘é‡‡æ ·ã€æµ®ç‚¹æƒé‡ |
| `Expansion`           | O(n Ã— w)      | O(1)        | å°æƒé‡é›†åˆã€æœ€å¿«é‡‡æ · |
| `Binary`              | O(n)          | O(log n)    | é€šç”¨ã€æ•´æ•°æƒé‡ä¼˜å…ˆ |

## ç¼–è¯‘è¦æ±‚

- C++20 åŠä»¥ä¸Šï¼ˆä»…å°‘é‡è¯­æ³•ï¼‰
- æ— ç¬¬ä¸‰æ–¹ä¾èµ–ï¼ˆä»… STLï¼‰

## TODO

- [ ] æ·»åŠ æ›´å¤šé‡‡æ ·ç­–ç•¥æ”¯æŒ
- [ ] æ”¯æŒåˆ†å¸ƒç­–ç•¥æ’ä»¶å¼æ‰©å±•


## ä¿¡æ¯å¤‡å¿˜

>> å¼•æ“ï¼ˆEngineï¼‰ï¼šåƒæ˜¯ä¸€å°éª°å­æœºï¼Œä¸åœåœ°åå‡ºâ€œåŸºç¡€éšæœºæ•°â€ã€‚

>> åˆ†å¸ƒï¼ˆDistributionï¼‰ï¼šæ˜¯ä¸€ä¸ªæ•°å­¦è¿‡æ»¤å™¨ï¼Œå‘Šè¯‰ä½ â€œè¿™äº›éšæœºæ•°åº”è¯¥åˆ†å¸ƒæˆä»€ä¹ˆæ ·å­â€ã€‚

- å¦‚ä½•é€‰æ‹©éšæœºå¼•æ“

|åº”ç”¨åœºæ™¯ | æ¨èå¼•æ“ | åŸå› |
|----------|----------|----------|
|æ¸¸æˆä¸­çš„éå…³é”®éšæœºè¡Œä¸º | default_random_engine æˆ– minstd_rand | å¿«é€Ÿï¼Œæ˜“äºä½¿ç”¨|
|ç§‘å­¦æ¨¡æ‹Ÿ | mt19937 æˆ– ranlux48 | é«˜è´¨é‡éšæœºæ•°|
|åŠ å¯†ç›¸å…³ | âŒ ä¸ä½¿ç”¨è¿™äº›å¼•æ“ | è¯·ä½¿ç”¨ std::random_device + ä¸“ä¸šåŠ å¯†åº“|
|æ•™å­¦ / å­¦ä¹  | minstd_rand, knuth_b | ç®€å•ï¼Œå®¹æ˜“ç†è§£|
|åµŒå…¥å¼ç³»ç»Ÿ | minstd_rand0 | å°å†…å­˜ï¼Œå ç”¨ä½|
|è·¨å¹³å°ä¸€è‡´æ€§è¦æ±‚ | æ˜ç¡®æŒ‡å®š mt19937 å¹¶ä½¿ç”¨å›ºå®šç§å­ | ä¿è¯å¯é‡ç°æ€§|

- å¸¸è§åˆ†å¸ƒç§ç±»åŠç”¨é€”

|åˆ†å¸ƒåç§° | ç±»å | æè¿° | å…¸å‹ç”¨é€”|
|----------|----------|----------|----------|
|å‡åŒ€æ•´æ•°åˆ†å¸ƒ | std::uniform_int_distribution | ç­‰æ¦‚ç‡ç”ŸæˆæŸèŒƒå›´å†…çš„æ•´æ•° | æŠ½å¥–ã€éª°å­ã€æ¸¸æˆäº‹ä»¶|
|å‡åŒ€å®æ•°åˆ†å¸ƒ | std::uniform_real_distribution | ç”Ÿæˆå®æ•°èŒƒå›´å†…ç­‰æ¦‚ç‡å€¼ | ç‰©ç†æ¨¡æ‹Ÿã€å½’ä¸€åŒ–å€¼|
|ä¼¯åŠªåˆ©åˆ†å¸ƒ | std::bernoulli_distribution | æˆåŠŸæ¦‚ç‡ p çš„äºŒé¡¹åˆ†å¸ƒï¼ˆ0 æˆ– 1ï¼‰ | æ·ç¡¬å¸ã€æ¦‚ç‡åˆ¤æ–­|
|äºŒé¡¹åˆ†å¸ƒ | std::binomial_distribution | n æ¬¡è¯•éªŒä¸­æˆåŠŸæ¬¡æ•° | ç¦»æ•£äº‹ä»¶æˆåŠŸæ¬¡æ•°æ¨¡æ‹Ÿ|
|å‡ ä½•åˆ†å¸ƒ | std::geometric_distribution | æˆåŠŸä¸€æ¬¡å‰å¤±è´¥çš„æ¬¡æ•° | ç­‰å¾…ç¬¬ä¸€æ¬¡æˆåŠŸçš„æ¨¡å‹|
|æ³Šæ¾åˆ†å¸ƒ | std::poisson_distribution | å•ä½æ—¶é—´å†…äº‹ä»¶å‘ç”Ÿæ¬¡æ•° | ç½‘ç»œåŒ…ã€ç”µè¯ä¸­å¿ƒæ¨¡æ‹Ÿ|
|æ­£æ€åˆ†å¸ƒï¼ˆé«˜æ–¯ï¼‰ | std::normal_distribution | é’Ÿå½¢æ›²çº¿ | å™ªå£°ã€è¯¯å·®æ¨¡æ‹Ÿã€æœºå™¨å­¦ä¹ åˆå§‹åŒ–|
|å¯¹æ•°æ­£æ€åˆ†å¸ƒ | std::lognormal_distribution | å˜é‡å¯¹æ•°æ­£æ€åˆ†å¸ƒ | è‚¡ç¥¨æ”¶ç›Šã€é‡‘èæ¨¡å‹|
|æŒ‡æ•°åˆ†å¸ƒ | std::exponential_distribution | æ—¶é—´é—´éš”æ¨¡æ‹Ÿ | æ’é˜Ÿã€å¯¿å‘½å»ºæ¨¡|
|gamma åˆ†å¸ƒ | std::gamma_distribution | å¹¿ä¹‰æ³Šæ¾æ—¶é—´é—´éš” | ç”Ÿç‰©æ¨¡å‹ã€è´å¶æ–¯æ–¹æ³•|
|Weibull åˆ†å¸ƒ | std::weibull_distribution | äº§å“å¯¿å‘½åˆ†æ | å·¥ä¸šå¯é æ€§|
|extreme value åˆ†å¸ƒ | std::extreme_value_distribution | æç«¯äº‹ä»¶æ¦‚ç‡ | é£é€Ÿã€æ´ªæ°´é¢„æµ‹|